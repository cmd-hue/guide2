const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DyJ2F_Im.js","./jIWzCdtn.js","./pw744FVa.js"])))=>i.map(i=>d[i]);
var M=Object.defineProperty;var G=(i,e,t)=>e in i?M(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var r=(i,e,t)=>G(i,typeof e!="symbol"?e+"":e,t);import{_ as w}from"./jIWzCdtn.js";const C={LoadFail:0,BadSignature:1,BadTimestamp:2,BadSettingValue:3,BadFormat:4,UnknownSetting:5};class V extends Error{constructor(t){super(t.reason);r(this,"code");r(this,"line");this.code=t.code,this.line=t.line}}const S=/\r?\n|\r/gm;class j{constructor(e){r(this,"writable");r(this,"readable");const t=new z(e);this.writable=new WritableStream({write(s){t.transform(s)},close(){t.close()}}),this.readable=new ReadableStream({start(s){t.onLine=n=>s.enqueue(n),t.onClose=()=>s.close()}})}}class z{constructor(e){r(this,"a","");r(this,"b");r(this,"onLine");r(this,"onClose");this.b=new TextDecoder(e)}transform(e){this.a+=this.b.decode(e,{stream:!0});const t=this.a.split(S);this.a=t.pop()||"";for(let s=0;s<t.length;s++)this.onLine(t[s].trim())}close(){this.a&&this.onLine(this.a.trim()),this.a="",this.onClose()}}async function D(i,e){const t=new ReadableStream({start(s){const n=i.split(S);for(const o of n)s.enqueue(o);s.close()}});return v(t,e)}async function v(i,e){const t=(e==null?void 0:e.type)??"vtt";let s;if(typeof t=="string")switch(t){case"srt":s=(await w(async()=>{const{default:h}=await import("./B1hDXM_L.js");return{default:h}},[],import.meta.url)).default;break;case"ssa":case"ass":s=(await w(async()=>{const{default:h}=await import("./DyJ2F_Im.js");return{default:h}},__vite__mapDeps([0,1,2]),import.meta.url)).default;break;default:s=(await Promise.resolve().then(function(){return ne})).default}else s=t;let n;const o=i.getReader(),l=s(),c=!!(e!=null&&e.strict)||!!(e!=null&&e.errors);await l.init({strict:!1,...e,errors:c,type:t,cancel(){o.cancel(),n=l.done(!0)}});let a=1;for(;;){const{value:h,done:u}=await o.read();if(u){l.parse("",a),n=l.done(!1);break}l.parse(h,a),a++}return n}async function W(i,e){var l,c;const t=await i;if(!t.ok||!t.body)return{metadata:{},cues:[],regions:[],errors:[void 0]};const s=t.headers.get("content-type")||"",n=(l=s.match(/text\/(.*?)(?:;|$)/))==null?void 0:l[1],o=(c=s.match(/charset=(.*?)(?:;|$)/))==null?void 0:c[1];return P(t.body,{type:n,encoding:o,...e})}async function P(i,{encoding:e="utf-8",...t}={}){const s=i.pipeThrough(new j(e));return v(s,t)}class y extends EventTarget{constructor(t,s,n){super();r(this,"id","");r(this,"startTime");r(this,"endTime");r(this,"text");r(this,"pauseOnExit",!1);this.startTime=t,this.endTime=s,this.text=n}addEventListener(t,s,n){super.addEventListener(t,s,n)}removeEventListener(t,s,n){super.removeEventListener(t,s,n)}}const $=typeof document>"u",q=$?y:window.VTTCue;class L extends q{constructor(){super(...arguments);r(this,"region",null);r(this,"vertical","");r(this,"snapToLines",!0);r(this,"line","auto");r(this,"lineAlign","start");r(this,"position","auto");r(this,"positionAlign","auto");r(this,"size",100);r(this,"align","center");r(this,"style")}}class x{constructor(){r(this,"id","");r(this,"width",100);r(this,"lines",3);r(this,"regionAnchorX",0);r(this,"regionAnchorY",100);r(this,"viewportAnchorX",0);r(this,"viewportAnchorY",100);r(this,"scroll","")}}const N=",",B="%";function F(i){const e=parseInt(i,10);return Number.isNaN(e)?null:e}function g(i){const e=parseInt(i.replace(B,""),10);return!Number.isNaN(e)&&e>=0&&e<=100?e:null}function A(i){if(!i.includes(N))return null;const[e,t]=i.split(N).map(g);return e!==null&&t!==null?[e,t]:null}function H(i){const e=parseFloat(i);return Number.isNaN(e)?null:e}const X="WEBVTT",I=",",Y="%",d=/[:=]/,K=/^[\s\t]*(region|vertical|line|position|size|align)[:=]/,U="NOTE",J="REGION",Q=/^REGION:?[\s\t]+/,_=/[\s\t]+/,Z="-->",ee=/[\s\t]*-->[\s\t]+/,te=/start|center|end|left|right/,se=/start|center|end/,ie=/line-(?:left|right)|center|auto/,re=/^(?:(\d{1,2}):)?(\d{2}):(\d{2})(?:\.(\d{1,3}))?$/;var O=(i=>(i[i.None=0]="None",i[i.Header=1]="Header",i[i.Cue=2]="Cue",i[i.Region=3]="Region",i[i.Note=4]="Note",i))(O||{});class k{constructor(){r(this,"h");r(this,"e",0);r(this,"i",{});r(this,"j",{});r(this,"l",[]);r(this,"c",null);r(this,"d",null);r(this,"m",[]);r(this,"f");r(this,"n","")}async init(e){this.h=e,e.strict&&(this.e=1),e.errors&&(this.f=(await w(async()=>{const{ParseErrorBuilder:t}=await import("./_igPEGtf.js");return{ParseErrorBuilder:t}},[],import.meta.url)).ParseErrorBuilder)}parse(e,t){var s,n,o,l,c,a;if(e==="")this.c?(this.l.push(this.c),(n=(s=this.h).onCue)==null||n.call(s,this.c),this.c=null):this.d?(this.j[this.d.id]=this.d,(l=(o=this.h).onRegion)==null||l.call(o,this.d),this.d=null):this.e===1&&(this.k(e,t),(a=(c=this.h).onHeaderMetadata)==null||a.call(c,this.i)),this.e=0;else if(this.e)switch(this.e){case 1:this.k(e,t);break;case 2:if(this.c){const h=this.c.text.length>0;!h&&K.test(e)?this.o(e.split(_),t):this.c.text+=(h?`
`:"")+e}break;case 3:this.p(e.split(_),t);break}else if(e.startsWith(U))this.e=4;else if(e.startsWith(J))this.e=3,this.d=new x,this.p(e.replace(Q,"").split(_),t);else if(e.includes(Z)){const h=this.q(e,t);h&&(this.c=new L(h[0],h[1],""),this.c.id=this.n,this.o(h[2],t)),this.e=2}else t===1&&this.k(e,t);this.n=e}done(){return{metadata:this.i,cues:this.l,regions:Object.values(this.j),errors:this.m}}k(e,t){var s;if(t>1){if(d.test(e)){const[n,o]=e.split(d);n&&(this.i[n]=(o||"").replace(_,""))}}else e.startsWith(X)?this.e=1:this.g((s=this.f)==null?void 0:s.r())}q(e,t){var h,u,f;const[s,n=""]=e.split(ee),[o,...l]=n.split(_),c=T(s),a=T(o);if(c!==null&&a!==null&&a>c)return[c,a,l];c===null&&this.g((h=this.f)==null?void 0:h.s(s,t)),a===null&&this.g((u=this.f)==null?void 0:u.t(o,t)),c!=null&&a!==null&&a>c&&this.g((f=this.f)==null?void 0:f.u(c,a,t))}p(e,t){var n,o;let s;for(let l=0;l<e.length;l++)if(d.test(e[l])){s=!1;const[c,a]=e[l].split(d);switch(c){case"id":this.d.id=a;break;case"width":const h=g(a);h!==null?this.d.width=h:s=!0;break;case"lines":const u=F(a);u!==null?this.d.lines=u:s=!0;break;case"regionanchor":const f=A(a);f!==null?(this.d.regionAnchorX=f[0],this.d.regionAnchorY=f[1]):s=!0;break;case"viewportanchor":const p=A(a);p!==null?(this.d.viewportAnchorX=p[0],this.d.viewportAnchorY=p[1]):s=!0;break;case"scroll":a==="up"?this.d.scroll="up":s=!0;break;default:this.g((n=this.f)==null?void 0:n.v(c,a,t))}s&&this.g((o=this.f)==null?void 0:o.w(c,a,t))}}o(e,t){var n,o;let s;for(let l=0;l<e.length;l++)if(s=!1,d.test(e[l])){const[c,a]=e[l].split(d);switch(c){case"region":const h=this.j[a];h&&(this.c.region=h);break;case"vertical":a==="lr"||a==="rl"?(this.c.vertical=a,this.c.region=null):s=!0;break;case"line":const[u,f]=a.split(I);if(u.includes(Y)){const m=g(u);m!==null?(this.c.line=m,this.c.snapToLines=!1):s=!0}else{const m=H(u);m!==null?this.c.line=m:s=!0}se.test(f)?this.c.lineAlign=f:f&&(s=!0),this.c.line!=="auto"&&(this.c.region=null);break;case"position":const[p,E]=a.split(I),R=g(p);R!==null?this.c.position=R:s=!0,E&&ie.test(E)?this.c.positionAlign=E:E&&(s=!0);break;case"size":const b=g(a);b!==null?(this.c.size=b,b<100&&(this.c.region=null)):s=!0;break;case"align":te.test(a)?this.c.align=a:s=!0;break;default:this.g((n=this.f)==null?void 0:n.x(c,a,t))}s&&this.g((o=this.f)==null?void 0:o.y(c,a,t))}}g(e){var t,s;if(e){if(this.m.push(e),this.h.strict)throw this.h.cancel(),e;(s=(t=this.h).onError)==null||s.call(t,e)}}}function T(i){const e=i.match(re);if(!e)return null;const t=e[1]?parseInt(e[1],10):0,s=parseInt(e[2],10),n=parseInt(e[3],10),o=e[4]?parseInt(e[4].padEnd(3,"0"),10):0,l=t*3600+s*60+n+o/1e3;return t<0||s<0||n<0||o<0||s>59||n>59?null:l}function ae(){return new k}var ne=Object.freeze({__proto__:null,VTTBlock:O,VTTParser:k,default:ae,parseVTTTimestamp:T});const ce=Object.freeze(Object.defineProperty({__proto__:null,ParseError:V,ParseErrorCode:C,TextCue:y,VTTCue:L,VTTRegion:x,parseByteStream:P,parseResponse:W,parseText:D,parseTextStream:v,parseVTTTimestamp:T},Symbol.toStringTag,{value:"Module"}));export{V as P,k as V,O as a,L as b,C as c,ce as d,T as p};
